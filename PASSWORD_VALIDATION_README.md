# Проверка паролей в скрипте добавления пользователей

## Описание

Добавлена функция проверки паролей с использованием регулярных выражений, которые можно настроить через переменную среды `PASSWORD_PATTERN`.

## Функция validate_password

```python
def validate_password(password: str, pattern: str = None) -> tuple[bool, str]:
```

### Параметры:
- `password` (str): Пароль для проверки
- `pattern` (str, опционально): Регулярное выражение для проверки. Если не указано, используется значение из переменной среды `PASSWORD_PATTERN`

### Возвращает:
- `tuple[bool, str]`: (результат проверки, сообщение об ошибке или "OK")

## Переменная среды PASSWORD_PATTERN

### Значение по умолчанию:
```
^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};:"\\|,.<>\/?]).{10,}$
```

Этот шаблон требует:
- Минимум 10 символов
- Хотя бы одну заглавную букву
- Хотя бы одну цифру  
- Хотя бы один спецсимвол из набора: `!@#$%^&*()_+-=[]{};:"\\|,.<>/?`

### Примеры других шаблонов:

1. **Минимум 8 символов:**
   ```
   ^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};:"\\|,.<>\/?]).{8,}$
   ```

2. **Минимум 12 символов с маленькими буквами:**
   ```
   ^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};:"\\|,.<>\/?]).{12,}$
   ```

3. **Только латинские буквы, цифры и спецсимволы:**
   ```
   ^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};:"\\|,.<>\/?])[A-Za-z0-9!@#$%^&*()_+\-=\[\]{};:"\\|,.<>\/?]{10,}$
   ```

## Интеграция в код

Функция интегрирована в `add_users_from_file()` и проверяет каждый пароль перед добавлением пользователя. При несоответствии пароля требованиям:

1. Запись помечается как ошибочная
2. Добавление пользователя отменяется
3. В лог записывается сообщение об ошибке с указанием номера строки

## Файлы

- `add_modify_users.py` - основная функция `validate_password()` и интеграция
- `env.example` - пример файла конфигурации с переменной `PASSWORD_PATTERN`
- `test_password_validation.py` - тесты для проверки функции
- `PASSWORD_VALIDATION_README.md` - данная документация

## Использование

1. Установите переменную `PASSWORD_PATTERN` в файле `.env`
2. Запустите скрипт - проверка паролей будет выполняться автоматически
3. При необходимости измените шаблон в `.env` и перезапустите скрипт
